<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data Visualizations</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="report.html">Project Report</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="about.html">The Project</a>
    </li>
    <li>
      <a href="About_Us.html">Us</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data.html">Data Sources</a>
    </li>
    <li>
      <a href="dataviz.html">Exploratory Analysis</a>
    </li>
    <li class="dropdown-header">Regression</li>
    <li class="dropdown-header">Results Summary</li>
  </ul>
</li>
<li>
  <a href="heatmap.html">Heat Maps</a>
</li>
<li>
  <a href="mailto:&lt;eih2108@cumc.columbia.edu; lel2176@cumc.columbia.edu; yl5503@cumc.columbia.edu; as7123@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-github fa-lg"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://github.com/yukilow913/p8105final.git">Project Repository</a>
    </li>
    <li>
      <a href="https://github.com/arthur-starodynov/P8105_Rats_In_NYC.github.io">Website Repository</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data Visualizations</h1>

</div>


<p>We first explored how rat sightings vary over time (month, day of the
week, year) and how rat sightings vary by borough. To do so, we used
simple tables, bar charts, line plots, heat maps, and interactive maps.
First, we visualize rat sightings by different measures of time (year,
month, and day of the week). Then, we visualize rat sightings by the
different types of locations they are found at.</p>
<pre class="r"><code>library(tidyverse)
library(lubridate)
library(readr) 
library(xts)
library(&quot;RColorBrewer&quot;)
library(&quot;ggthemes&quot;)
library(&quot;gridExtra&quot;)

rats_raw &lt;- read_csv(&quot;./Rat_Sightings.csv&quot;, na = c(&quot;&quot;, &quot;NA&quot;, &quot;N/A&quot;, &quot;Unspecified&quot;)) %&gt;%
  janitor::clean_names() %&gt;% 
  mutate(created_date = mdy_hms(created_date)) %&gt;%
  mutate(sighting_year = year(created_date),
         sighting_month_num = month(created_date),
         sighting_month = month(created_date, label = TRUE, abbr = FALSE),
         sighting_day = day(created_date),
         sighting_weekday = wday(created_date, label = TRUE, abbr = FALSE)) </code></pre>
<div id="rat-sightings-by-year" class="section level3">
<h3>Rat Sightings by Year</h3>
<pre class="r"><code>by_year &lt;- rats_raw %&gt;% 
  group_by(sighting_year) %&gt;% 
  count() %&gt;% 
  ggplot(aes(x = sighting_year, y = n, fill = n)) + 
  geom_histogram(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  theme(legend.position =&#39;none&#39;,axis.title = element_text(),axis.text.x = element_text(size = 12)) +
  xlab(&quot;Year&quot;) + 
  ylab(&quot;Count&quot;) +
  geom_text(aes(label = n), vjust = -0.1, size = 3.75) +
  ggtitle(&#39;Count of Rat Sightings through the Years&#39;) + 
  scale_fill_gradientn(name = &#39;&#39;,colours = rev(brewer.pal(10,&#39;Spectral&#39;))) 

by_year</code></pre>
<p><img src="dataviz_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>We see a substantial increase in the number of rat sightings after
2020. This increase is consistent with the city of New York’s rat media
coverage and the impact of the COVID-19 pandemic. With more restaurants
closed and more restaurants offering outdoor dining, rats are more
likely to scavenge outside. A warmer, wetter than usual summer in 2021
also contributed to favorable rat conditions.</p>
</div>
<div id="rat-sightings-by-month" class="section level3">
<h3>Rat Sightings by Month</h3>
<pre class="r"><code>by_month &lt;- rats_raw %&gt;% 
  group_by(sighting_month) %&gt;% 
  count() %&gt;% 
  ggplot(aes(x = sighting_month, y = n, fill = n)) + 
  geom_histogram(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  theme(legend.position =&#39;none&#39;,axis.title = element_text(),axis.text.x = element_text(size = 9)) +
  xlab(&quot;Month&quot;) + 
  ylab(&quot;Count&quot;) +
  geom_text(aes(label = n), vjust = -0.1, size = 3.75) +
  ggtitle(&#39;Count of Rat Sightings by Month&#39;) + 
  scale_fill_gradientn(name = &#39;&#39;,colours = rev(brewer.pal(10,&#39;Spectral&#39;))) 

by_month</code></pre>
<p><img src="dataviz_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The most rat sightings are in the summer months with a peak in July.
Sightings taper off in the fall, reaching a low in December, and then
start to increase in the spring. Warmer weather is more favorable to rat
survival and helps their populations grow.</p>
</div>
<div id="rat-sightings-by-day-of-the-week" class="section level3">
<h3>Rat Sightings by Day of the Week</h3>
<pre class="r"><code>by_day &lt;- rats_raw %&gt;% 
  group_by(sighting_weekday) %&gt;% 
  count() %&gt;% 
  ggplot(aes(x = sighting_weekday, y = n, fill = n)) + 
  geom_histogram(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  theme(legend.position =&#39;none&#39;,axis.title = element_text(),axis.text.x = element_text(size = 12)) +
  xlab(&quot;Weekday&quot;) + 
  ylab(&quot;Count&quot;) +
  geom_text(aes(label = n), vjust = -0.1, size = 4) +
  ggtitle(&#39;Count of Rat Sightings by Day of Week&#39;) + 
  scale_fill_gradientn(name = &#39;&#39;,colours = rev(brewer.pal(10,&#39;Spectral&#39;))) 

by_day</code></pre>
<p><img src="dataviz_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Weekdays have the most rat sightings, peaking on Mondays and staying
relatively high throughout the week, while weekends have much lower
counts.</p>
</div>
<div id="rat-sightings-by-location-type" class="section level3">
<h3>Rat Sightings by Location Type</h3>
<pre class="r"><code>for_location_type &lt;- rats_raw %&gt;% 
  drop_na(location_type) %&gt;%
  filter(location_type != &quot;Other (Explain Below)&quot;) %&gt;%
  group_by(location_type) %&gt;%
  mutate(count_loc = n()) %&gt;%
  ungroup() %&gt;%
  filter(location_type %in% c(&quot;3+ Family Apt. Building&quot;, &quot;1-2 Family Dwelling&quot;, &quot;3+ Family Mixed Use Building&quot;, &quot;Commercial Building&quot;, &quot;Vacant Lot&quot;, &quot;Construction Site&quot;))

ggplot(data = for_location_type, aes(x = fct_infreq(location_type))) + 
  geom_bar() +
  theme_minimal() + 
  coord_flip() +
  labs(title = &quot;Top 6 Location Types for Sightings&quot;,
       x = &quot;Location Type&quot;,
       y = &quot;Count&quot;)</code></pre>
<p><img src="dataviz_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The above shows the top 6 location types for rat sightings. 3+ Family
Apt. Buildings report the highest amount of rat sightings among all
location types, while 1-2 Family Dwellings and 3+ Family Mixed Use
Buildings report the next two highest amount of sightings. These
location types are followed by commercial buildings, vacant lots, and
construction sites.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
